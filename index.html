<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Document</title>
  </head>
  <body>
    <form>
      <div>
        <label for="select">Select box:</label>
        <div class="select-wrapper">
          <select name="select" id="select" required pattern="Banana|Cherry|Strawberry">
            <option value="" disabled selected>Select an option</option>
            <option>Banana</option>
            <option>Cherry</option>
            <option>Strawberry</option>
          </select>
        </div>
      </div>
      <div>
        <label for="myFruit">"Favourite fruit?" datalist:</label>
        <input type="text" name="myFruit" id="myFruit" required list="mySuggestion" />
        <datalist id="mySuggestion">
          <option>Apple</option>
          <option>Banana</option>
          <option>Blackberry</option>
          <option>Lemon</option>
          <option>Peach</option>
          <option>Pear</option>
        </datalist>
      </div>
      <div>
        <label for="date1">Datetime local:</label>
        <input type="datetime-local" id="date1" required name="date1" />
      </div>
      <div>
        <label for="file">File picker:</label>
        <input type="file" id="file" name="file" required multiple />
        <ul id="file-list"></ul>
      </div>
      <div>
        <label for="progress">Progress:</label>
        <progress max="100" value="20" id="progress">20</progress>
      </div>
      <div>
        <label for="meter">Meter:</label>
        <meter
          id="meter"
          min="0"
          max="100"
          value="10"
          low="33"
          high="66"
          optimum="50"
        >
          10
        </meter>
      </div>
      <div>
        <button>Submit?</button>
      </div>
    </form>
    <script>
      const btn = document.querySelector("button");

      function sendData(data) {
            console.log("Sending data");

            const XHR = new XMLHttpRequest();

            const urlEncodeDataPairs = [];

            for (const [name,value] of Object.entries(data)) {
                urlEncodeDataPairs.push(
                    `${encodeURIComponent(name)}=${encodeURIComponent(value)}`,
                );
            }

            const urlEncodeData = urlEncodeDataPairs.join("&").replace(/%20/g, "+");

            XHR.addEventListener("load", (event) => {
                alert("Yeah! Data sent and response loaded.");
            });

            XHR.addEventListener("error", (event) => {
                alert("Oops! Something went wrong.");
            });

            XHR.open("POST", "https://example.com/cors.php");

            XHR.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

            XHR.send(urlEncodeData)
        }

        btn.addEventListener("click", () => {
            sendData({ test: "ok"});
        });
    </script>
  </body>
</html>
